const ajax=function(a){function c(a,b){return void 0===a?b:a}void 0!==a.beforeSend&&a.beforeSend instanceof Function&&a.beforeSend();let b={url:c(a.url,""),type:c(a.type,"GET"),headers:c(a.headers,{}),data:c(a.data,null),dataType:c(a.dataType,"text"),global:c(a.global,!0),success:c(a.success,function(b){a.debug&&console.log(b)}),error:c(a.error,function(b){a.debug&&console.log(b)})},d={};if(void 0!==a.data){let e;a.data.tagName&&"form"===a.data.tagName.toLowerCase()?e=new FormData(a.data):(e=new FormData,Object.keys(b.data).forEach(function(a){e.append(a,b.data[a])})),d.body=e,b.type="POST"}d.method=b.type,d.headers=b.headers,b.global&&"undefined"!=typeof ajaxOptions&&ajaxOptions instanceof Function&&ajaxOptions(b),fetch(b.url,d).then(function(a){if(a.status>=200&&a.status<300)return a;{let b=new Error(a.statusText);throw b.response=a,b}}).then(function(a){let c=a.headers.get("Content-Type");return"json"===b.dataType||c.includes("json")?a.json():a.text()}).then(b.success).catch(b.error),void 0!==a.complete&&a.complete instanceof Function&&a.complete()}
